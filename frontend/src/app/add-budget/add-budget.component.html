<div class="add-budget-container" [formGroup]="formGroup">
    <h1>Dodaj budżet</h1>
    <div class="add-budget-form">
        <mat-form-field>
            <input matInput type="text" [formControlName]="'name'" placeholder="Nazwa budżetu">
            <mat-hint align="end">Wprowadź nazwę budżetu</mat-hint>
        </mat-form-field>

        <mat-form-field>
            <input matInput type="date" [formControlName]="'startDate'" placeholder="Data rozpoczęcia">
            <mat-hint align="end">Wprowadź datę rozpoczęcia</mat-hint>
        </mat-form-field>

        <mat-form-field>
            <input matInput type="date" [formControlName]="'endDate'" placeholder="Data zakończenia">
            <mat-hint align="end">Wprowadź datę zakończenia</mat-hint>
        </mat-form-field>

        <div class="budget-category-input-container">
            <ng-container
                formArrayName="categories"
                *ngFor="let category of formGroup.get('categories').controls; let i = index;">
                <div [formGroupName]="i" class="budget-category-inputs">
                    <mat-form-field>
                        <input matInput type="text" [formControlName]="'name'" placeholder="Nazwa kategorii budżetu">
                        <mat-hint align="end">Wprowadź nazwę kategorii budżetu</mat-hint>
                    </mat-form-field>
                    <mat-form-field>
                        <input matInput type="number" [formControlName]="'declaredAmount'" placeholder="Limit pieniężny kategorii budżetu">
                        <span matPrefix>PLN&nbsp;</span>
                        <mat-hint align="end">Wprowadź limit pieniężny dla danej kategorii</mat-hint>
                    </mat-form-field>
                </div>
            </ng-container>
        </div>
        <button mat-icon-button (click)="addCategory()">
            <mat-icon>playlist_add</mat-icon>
        </button>

        <div class="buttons">
            <button class="cancel-btn" mat-raised-button routerLink="/dashboard">Zakończ</button>
            <button class="cancel-btn" mat-raised-button color="secondary" routerLink="/manage-budgets">Zarządzaj budżetami</button>
            <button class="add-btn" mat-raised-button color="primary" (click)="addBudget(formGroup.value)">Dodaj</button>
        </div>
    </div>

    <mat-card *ngIf="isErrorMsgVisible && !formGroup.valid">
        <mat-card-content>
            <p style="text-align: center; color: red; font-size: 16px;">Wprowadź wszystkie dane</p>
        </mat-card-content>
    </mat-card>
</div>
